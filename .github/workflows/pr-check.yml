name: PR Checks

on:
    pull_request:
        branches:
            - main
    workflow_dispatch:

permissions:
    contents: read

jobs:
    analyze-and-test:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Set up Flutter
              uses: subosito/flutter-action@v2
              with:
                  channel: stable
                  cache: true

            - name: Install dependencies
              run: flutter pub get

            - name: Analyze
              run: flutter analyze

            - name: Test
              run: flutter test
